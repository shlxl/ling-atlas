name: "PR-G å®‰å…¨ä¸åˆè§„"
description: "ä¸ºç«™ç‚¹åŠ å…¥ CSPã€å®‰å…¨å¤´ä¸ SRIï¼Œå¹¶åœ¨ CI ä¸­è‡ªåŠ¨æ ¡éªŒï¼›çº¯é™æ€æ–¹æ¡ˆä¸”ä¸ç ´åç°æœ‰æ„å»ºä¸ BASE è·¯å¾„"
title: "[PR-G] å®‰å…¨ä¸åˆè§„ï¼ˆCSP / SRI / security-headersï¼‰"
labels:
  - security
  - ci
  - automation
body:
  - type: markdown
    attributes:
      value: |
        ## ğŸ¯ ç›®æ ‡
        - ä¸º Ling-Atlas æä¾›é™æ€å®‰å…¨å¤´ï¼ˆCSPã€Referrerã€Permissions ç­‰ï¼‰ä¸ Subresource Integrityï¼ˆSRIï¼‰æ¸…å•ï¼›
        - åœ¨æ„å»ºåè‡ªåŠ¨ç”Ÿæˆå¹¶æ ¡éªŒï¼›è‹¥å¤–éƒ¨ CDN å˜æ›´ä½† SRI æœªæ›´æ–°åˆ™ CI failï¼›
        - çº¯é™æ€å®ç°ï¼ˆmeta CSP æˆ– `.well-known` æ–‡æœ¬/JSONï¼‰ï¼Œä¸æ”¹å˜ç°æœ‰æ„å»ºä¸ BASE è·¯å¾„é€»è¾‘ï¼›
        - é›¶ç ´åï¼šåŠŸèƒ½ä¸æœ¬åœ° dev/preview ä¸å—å½±å“ã€‚
  - type: markdown
    attributes:
      value: |
        ## ğŸ§© ä»»åŠ¡æ‹†è§£
        ...
        #ï¼ˆæ­¤å¤„çœç•¥ä¸­é—´å†…å®¹ï¼Œå¯å¡«å…¥ä½ åŸæœ‰çš„åˆ†è§£ä»»åŠ¡ï¼Œæ³¨æ„ä¿æŒç¼©è¿›ä¸æ ¼å¼ï¼‰#
        ...
  - type: checkboxes
    id: acceptance
    attributes:
      label: "âœ… éªŒæ”¶æ ‡å‡†"
      options:
        - label: "Lighthouse Best Practices â‰¥ 95 ä¸”æ§åˆ¶å°æ—  CSP è¿è§„ï¼ˆæœ¬åœ°/CI å¤ç°ï¼‰"
          required: true
        - label: "æ‰€æœ‰å¤–é“¾èµ„æºå‡åœ¨ `sri-manifest.json` ä¸­ï¼Œä¸”ä½¿ç”¨å¤„é™„å¸¦ `integrity` + `crossorigin=\"anonymous\"`"
          required: true
        - label: "`security-headers.txt`ï¼ˆå¯é€šè¿‡ `/.well-known/security-headers.txt` è®¿é—®ï¼‰ä¸ `sri-manifest.json` å­˜åœ¨å¹¶è¢«å‘å¸ƒåˆ° `dist/`"
          required: true
        - label: "CI åœ¨å¤–éƒ¨ CDN å˜æ›´å¯¼è‡´ SRI ä¸åŒ¹é…æ—¶ failï¼›ä¸”å¯é€šè¿‡ç»´æŠ¤ç™½åå•/æ›´æ–° SRI æ¢å¤"
          required: true
  - type: textarea
    id: logs
    attributes:
      label: "ğŸ§ª éªŒè¯ä¸æ—¥å¿—ï¼ˆå»ºè®®åœ¨ Issue ä¸­è´´ä¸Šï¼‰"
      description: "CI è¿è¡Œåè¯·ç²˜è´´å…³é”®æ—¥å¿—ç‰‡æ®µï¼ˆSRI åˆ—è¡¨ã€CSP æ‘˜è¦ã€ä»»ä½•æŠ¥é”™ï¼‰"
      placeholder: |
        [generate-headers] wrote docs/public/.well-known/security-headers.txt
        [sri] computed 4 integrity entries:
          - https://esm.sh/.. -> sha384-...
        [ci] copied .well-known/* -> dist/.well-known/
        [ci] Lighthouse best-practices: 96
  - type: markdown
    attributes:
      value: |
        ## âš™ï¸ å®æ–½ç»†èŠ‚ä¸çº¦æŸ
        ...
  - type: markdown
    attributes:
      value: |
        ## ğŸ” å›æ»šç­–ç•¥
        ...
  - type: markdown
    attributes:
      value: |
        ## ğŸ“ æ¨èè¾“å‡ºç‰©ï¼ˆPR åº”åŒ…å«ï¼‰
        ...
  - type: markdown
    attributes:
      value: |
        ## å®æ–½æç¤ºï¼ˆå·¥ç¨‹å¸ˆå°è´´å£«ï¼‰
        ...
