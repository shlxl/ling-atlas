name: "PR-F å†…å®¹ç”Ÿäº§åŠ›"
description: "ä¸º Ling-Atlas å¢åŠ  Markdown è´¨é‡å®ˆé—¨ã€æ­»é“¾æ£€æŸ¥ã€ä¸å›¾ç‰‡è‡ªåŠ¨å‹ç¼© + WebP è½¬æ¢ï¼ˆæ„å»ºæœŸï¼‰"
title: "[PR-F] å†…å®¹ç”Ÿäº§åŠ›å®ˆé—¨"
labels: ["content", "quality", "CI", "automation"]
body:
  - type: markdown
    attributes:
      value: |
        ## ğŸ¯ ç›®æ ‡
        è®©å†™ä½œæ›´ç¨³ï¼šåœ¨æ„å»ºå‰ç»Ÿä¸€åš **Markdown Lint â†’ é“¾æ¥æ£€æŸ¥ â†’ å›¾ç‰‡ä¼˜åŒ–** çš„è´¨é‡é—¸é—¨ï¼Œå¤±è´¥å³ CI failï¼›æœ¬åœ°ä½“éªŒè½»é‡å¯å¤ç°ã€‚

  - type: markdown
    attributes:
      value: |
        ## ğŸ§© ä»»åŠ¡

        ### 1) Markdown Lint
        - devDep: `markdownlint-cli2`
        - æ–°å¢ `.markdownlint.jsonc`ï¼ˆå»ºè®®é¡¹ï¼‰ï¼š
          ```jsonc
          {
            "default": true,
            "MD001": true,              // æ ‡é¢˜åºå·
            "MD013": { "line_length": 140, "code_blocks": false }, // è¡Œé•¿å®½æ¾ï¼Œä»£ç å—è±å…
            "MD033": false,             // å…è®¸å†…è” HTMLï¼ˆå¦‚å¿…è¦ï¼‰
            "MD041": true               // æ–‡ä»¶éœ€ä»¥æ ‡é¢˜å¼€å¤´
          }
          ```
        - `package.json` è„šæœ¬ï¼š
          ```json
          { "scripts": { "md:lint": "markdownlint-cli2 'docs/**/*.md'" } }
          ```

        ### 2) å¤–é“¾ / å†…é“¾æ£€æŸ¥
        - devDepï¼ˆå…¶ä¸€ï¼‰ï¼š`markdown-link-check` **æˆ–** è‡ªå†™ Node è„šæœ¬ï¼ˆé¿å…ç½‘ç»œæ³¢åŠ¨ï¼‰
        - æ–°å»º `scripts/check-links.mjs`ï¼š
          - æ‰«æ `docs/**/*.md`ï¼Œæå– `[text](url)`
          - é»˜è®¤ **ç¦»çº¿æ¨¡å¼**ï¼šä»…æ ¡éªŒç«™å†…è·¯å¾„æ ¼å¼ã€å¯¹åº”ç”Ÿæˆé¡µ/é™æ€æ–‡ä»¶å­˜åœ¨æ€§
          - å¯é€‰ `--online`ï¼šå¯¹ `http(s)` é“¾æ¥åš HEAD/GET æ£€æŸ¥ï¼ˆå®¹é”™é‡è¯•ï¼Œè¶…æ—¶é™çº§è·³è¿‡ï¼‰
          - å‘ç° 404 æˆ–æ ¼å¼é”™è¯¯ â†’ `process.exit(1)`
        - `package.json` è„šæœ¬ï¼ˆç¤ºä¾‹ï¼‰ï¼š
          ```json
          { "scripts": { "links:check": "node scripts/check-links.mjs" } }
          ```

        ### 3) å›¾ç‰‡ä¼˜åŒ–ï¼ˆæ„å»ºå‰ï¼‰
        - devDep: `sharp`
        - æ–°å»º `scripts/img-opt.mjs`ï¼š
          - æ‰«æ `docs/public/images/**/*.{png,jpg,jpeg}`
          - ç”Ÿæˆ WebPï¼ˆ`quality: 82`ï¼‰å¹¶æ¯”è¾ƒä½“ç§¯ï¼›è‹¥ WebP æ›´å° â†’ **æ›¿æ¢å¼•ç”¨**ï¼ˆæ›´æ–° MD/é¡µé¢ä¸­çš„åç¼€ï¼‰
          - ç”Ÿæˆ 2x/1x å°ºå¯¸å˜ä½“ï¼ˆæœ€å¤§å®½ `1600px`ï¼›1x ä¸ºè‡ªåŠ¨ç­‰æ¯”ç¼©æ”¾ï¼‰ï¼Œä¿ç•™åŸå§‹æ–‡ä»¶
          - è¾“å‡ºä¼˜åŒ–æŠ¥å‘Šï¼ˆåŸä½“ç§¯ â†’ æ–°ä½“ç§¯ã€èŠ‚çœæ¯”ä¾‹ï¼‰
        - `package.json` è„šæœ¬ï¼š
          ```json
          { "scripts": { "img:opt": "node scripts/img-opt.mjs" } }
          ```

        ### 4) CI é›†æˆï¼ˆprecheck â†’ build ä¹‹å‰ï¼‰
        - åœ¨ `build` ä¹‹å‰æŒ‰é¡ºåºæ‰§è¡Œï¼š
          ```bash
          npm run md:lint
          node scripts/check-links.mjs
          node scripts/img-opt.mjs
          ```
        - å¤±è´¥å³ CI failï¼›æˆåŠŸåˆ™ç»§ç»­ `VitePress build + Pagefind ç´¢å¼• + embeddings æ„å»º`

        #### å®æ–½æç¤º
        - é“¾æ¥æ£€æŸ¥å»ºè®®å¿½ç•¥ `mailto:`ã€`javascript:`ã€é”šç‚¹ `#...`
        - å¯¹å¤–é“¾å¯é…ç½®å…è®¸åˆ—è¡¨ï¼ˆå¦‚å®˜æ–¹æ–‡æ¡£ç«™ï¼‰å¹¶è®¾ç½®é‡è¯•/è¶…æ—¶ï¼ˆå¦‚ 3 æ¬¡ Ã— 2sï¼‰
        - å›¾ç‰‡æ›¿æ¢æ—¶æ³¨æ„ç›¸å¯¹è·¯å¾„ä¸åŒåèµ„æºç¼“å­˜ï¼›å¯¹ MD ä¸­åŒä¸€å›¾ç‰‡å¤šå¤„å¼•ç”¨éœ€ä¸€è‡´æ›¿æ¢
        - å¯¹å¤§å‹äºŒè¿›åˆ¶æ–‡ä»¶å¯æ·»åŠ  `.gitattributes` å¼€å¯ `filter=lfs`ï¼ˆå¦‚åç»­éœ€è¦ï¼‰

  - type: checkboxes
    id: acceptance
    attributes:
      label: âœ… éªŒæ”¶æ ‡å‡†
      options:
        - label: æäº¤åŒ…å« `.markdownlint.jsonc`ã€`scripts/check-links.mjs`ã€`scripts/img-opt.mjs` ä¸ç›¸åº” npm è„šæœ¬
          required: true
        - label: CI èƒ½å¯¹åé“¾ / è¿‡å¤§æˆ–æœªä¼˜åŒ–å›¾ç‰‡ç»™å‡ºæ˜ç¡®æŠ¥é”™å¹¶å¤±è´¥
          required: true
        - label: æœ¬åœ° `npm run md:lint` å¯æå‰å‘ç°æ ¼å¼é—®é¢˜ï¼›`links:check` ä¸ `img:opt` å¯ç¨³å®šå¤ç°
          required: true
        - label: å›¾ç‰‡ä¼˜åŒ–äº§å‡ºåŒ…å« WebPï¼ˆquality 82ï¼‰ï¼Œå¿…è¦æ—¶æ›´æ–° MD å¼•ç”¨ï¼Œä½“ç§¯æ˜æ˜¾ä¸‹é™
          required: true

  - type: textarea
    id: logs
    attributes:
      label: ğŸ§ª éªŒè¯ä¸æ—¥å¿—
      description: ç²˜è´´å…³é”® CLI è¾“å‡ºï¼ˆç¤ºä¾‹ï¼šèŠ‚çœä½“ç§¯ã€åé“¾åˆ—è¡¨ã€ä¿®å¤å‰å diffï¼‰
      placeholder: |
        - markdownlint è¾“å‡ºç‰‡æ®µ
        - check-links æŠ¥é”™æ ·ä¾‹ï¼ˆå«æ–‡ä»¶ä¸è¡Œå·ï¼‰
        - img-opt ä¼˜åŒ–æ¸…å•ï¼ˆåŸ/æ–°å¤§å°ã€å‹ç¼©æ¯”ä¾‹ã€æ›¿æ¢çš„è·¯å¾„ï¼‰

  - type: markdown
    attributes:
      value: |
        ## ğŸ” å›æ»šç­–ç•¥
        - ä¸´æ—¶è·³è¿‡ä¸‰æ­¥ï¼ˆåœ¨ CI ä¸­æ³¨é‡Šæˆ–åŠ æ¡ä»¶å˜é‡ï¼‰
        - ä¿ç•™å·²ç”Ÿæˆçš„ WebP ä¸å°ºå¯¸å˜ä½“ä½†ä¸å¼ºåˆ¶æ›¿æ¢å¼•ç”¨
        - ä¸å½±å“æ ¸å¿ƒåŠŸèƒ½ï¼ˆæ„å»ºä¸æœç´¢ï¼‰

  - type: markdown
    attributes:
      value: |
        ## ğŸ“ å‚è€ƒè„šæ‰‹æ¶ï¼ˆå¯é€‰ï¼‰
        - `scripts/check-links.mjs`ï¼šç¦»çº¿ä¼˜å…ˆï¼Œ`--online` å¼€å…³
        - `scripts/img-opt.mjs`ï¼šåªåœ¨ä½“ç§¯æ›´å°æ‰æ›¿æ¢ï¼›è¾“å‡º Top N æœ€å¤§å›¾ç‰‡
        - `.markdownlint.jsonc`ï¼šæŒ‰éœ€è¦æ”¾å®½ MD013 è¡Œé•¿ï¼›å¯¹ä»£ç å—å’Œè¡¨æ ¼è±å…